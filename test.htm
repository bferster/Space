<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ArcGIS test</title>
	<link rel="stylesheet" href="https://js.arcgis.com/4.11/esri/themes/light/main.css">
	<script src="https://js.arcgis.com/4.11/"></script>
 	<style>
    	html, body, #viewDiv {	padding:0; margin:0; height:100%; width: 100%;  }
		#infoDiv { position: absolute; top: 15px;  left: 60px; }
		#infoDiv input { border: none; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 2px; }
	</style>
  </head>
  <body>
	<div id="viewDiv"></div>
	<div id="infoDiv">
		<input  class="esri-component esri-widget--button esri-widget esri-interactive" type="button" id="base-btn" value="B" title="Change base map"/>
		<input  class="esri-component esri-widget--button esri-widget esri-interactive" type="button" id="switch-btn" value="3D" title="Change view" />
	  </div>
	<script>

	var app={ basePick:null, container: "viewDiv",																	// Holds startup parameters
			  mapView: null,  sceneView: null, activeView: null, baseMap: "topo-vector",
   			  center: [91.1721, 29.6524], zoom: 12, tilt:65,
			  switchButton: document.getElementById("switch-btn")
	    	  };
	
	app.switchButton.addEventListener("click", function() { app.SwitchView();  });									// SWITCH VIEW BUTTON HANDLER
	document.getElementById("base-btn").addEventListener("click", function()   { app.PickBaseMap(); });				// SWITCH BASEMAP BUTTON HANDLER

	require(["esri/Map","esri/views/MapView","esri/views/SceneView", "esri/widgets/BasemapGallery"],				// ARCGIS REQUIRED  MODULES
	
		function(Map, MapView, SceneView, BasemapGallery) {																// When loaded
		
			var map=new Map({ basemap:app.baseMap});																	// Make new map
			app.sceneView=new SceneView( { 	container:null,	map: map });												// 3D view (hidden)
			app.activeView=app.mapView=new MapView({																	// 2D view
				container: app.container, map: map, 																	// Primary view
				center: app.center,	zoom: app.zoom
				});
			app.basePick=new BasemapGallery({																			// Make basemap picker
				view: app.mapView,
				source: { portal: { url: "https://www.arcgis.com", useVectorBasemaps: true } }
				});
			app.basePick.visible=false;																					// Hide gallery

			app.PickBaseMap=function()																				// HIDE/SHOW BASEMAP GALLERY
			{
				if (app.basePick.visible)		app.activeView.ui.remove(app.basePick);									// If visible, hide
				else							app.activeView.ui.add(app.basePick,"top-right");						// Else show
				app.basePick.visible=!app.basePick.visible;																// Toggle flag (why?)
			}

			app.SwitchView=function() 																				// SWITCH 2D/3D MODE
			{
				var is3D=app.activeView.type === "3d";																	// Current mode												
				var activeViewpoint=app.activeView.viewpoint.clone();													// Clone viewport
				app.activeView.container=null;																			// Hide current one
				
				if (is3D) {																								// If 3D now
					app.activeView=app.mapView;																			// Use 2D view
					app.switchButton.value="3D";																		// Set button
					} 
				else{																									// If 2D now
					app.activeView=app.sceneView;																		// Use 2D view
					app.switchButton.value="2D";																		// Set button
					}
				app.activeView.viewpoint=activeViewpoint;																// Set viewport
				app.activeView.container=app.container;																	// Set container
 			}		
	});

	function trace(msg, p1, p2, p3, p4)									
	{
		if (p4 != undefined)
			console.log(msg,p1,p2,p3,p4);
		else if (p3 != undefined)
			console.log(msg,p1,p2,p3);
		else if (p2 != undefined)
			console.log(msg,p1,p2);
		else if (p1 != undefined)
			console.log(msg,p1);
		else
			console.log(msg);
	}

</script>
</body>
</html>

