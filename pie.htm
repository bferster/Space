<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<link REL="SHORTCUT ICON" HREF="img/shanti.ico">
	<title>Pie demo</title>
 	<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>	
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" />
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script src="jquery.ui.touch-punch.min.js"></script>
   	<script src="pie.js" type="text/javascript"></script>

 	<style type="text/css">
		body { 			font-family:Verdana,Geneva,sans-serif; font-size:10px; 
						padding:0px;margin:0px;box-sizing:border-box;
						}
		.pi-main {		text-align:center;position:absolute;width:0px,height:0px;
						
						}
		.pi-slice {		position:absolute;width:100%;left:0px;top:0px;
						}
							}
		.unselectable { -moz-user-select: none;     -khtml-user-select: none;
		   			 	-webkit-user-select: none;  -ms-user-select: none;   user-select: none;
		   				}
		.selectable { 	-moz-user-select: text;     -khtml-user-select: text;
		   			 	-webkit-user-select: text;  -ms-user-select: text;   user-select: text;

 	</style>

</head>
<body>
<img id='fakeback' src='back.JPG'/>
<script>
	var ops={x:250,y:260,wid:150,ang:45};
	ops.active=[1,1,1,0,1,1,0,1,1];												// Active slices
	ops.close=[0,0,0,0,1,1,0,0,0];												// Vlose on click
	ops.dial="img/pdraw.png";													// Dial background
	ops.slice="img/philite.png";												// Slice highlight
	Sound("click",true);														// Init sound
	Sound("ding",true);															// Init sound
	Sound("delete",true);														// Init sound

$(document).ready(function() {												// ON PAGE LOADED
	isMobile=navigator.userAgent.match(/(ipad|iphone|ipod|android)/i) ? true : false; // Set mobile flag
	var url=window.location.search.substring(1);								// Get query string
	var pie=new Pie(ops);														// Init menu
	if (window.addEventListener) 												// If supported this way
		window.addEventListener("message",html5MessageHandler,false);			// Add event handler
	else																		// Use other method
		window.attachEvent("message",html5MessageHandler);						// Add handler
	
	$("#fakeback").on("click",function() { pie.ShowPieMenu(!$("#pimenu").width()) }); // Show pie menu on click
	
	});									


	function html5MessageHandler(e)											// ON HTML5 MESSAGE
	{
   		if (e && e.data && e.data.match(/PiMenu/))								// If a pimenu message
 			trace(e.data.split("|"))
 	}

</script>
</body></html>
